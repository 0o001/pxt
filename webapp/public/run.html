<!doctype html>
<html lang="en" data-framework="typescript">

<head>
    <meta charset="utf-8">
    <title>KindScript Simulator</title>
    <style>
iframe {
    position:absolute;
    left:0; top:0; width:100%;height:100%;
}
 </style>
</head>

<body>
    <div id='loading' style='font-size: 30px; font-family:monospace; margin: 100px auto; width: 200px;'>
        ...
    </div>
    <div id='simulators'>
    </div>
    <script>
        // This line gets patched up by the cloud
        var rootUrl = "dummy";
        var appCdnRoot = "./";
        var simCdnRoot = "./";
    </script>
    <script type="text/javascript">
    !function(a,b,c,d,e,f,g,h){a.RaygunObject=e,a[e]=a[e]||function(){
    (a[e].o=a[e].o||[]).push(arguments)},f=b.createElement(c),g=b.getElementsByTagName(c)[0],
    f.async=1,f.src=d,g.parentNode.insertBefore(f,g),h=a.onerror,a.onerror=function(b,c,d,f,g){
    h&&h(b,c,d,f,g),g||(g=new Error(b)),a[e].q=a[e].q||[],a[e].q.push({
    e:g})}}(window,document,"script","//cdn.raygun.io/raygun4js/raygun.min.js","rg4js");
    </script>    
    <script type="text/javascript" src="./embed.js"></script>
    <script type="text/javascript">
    var m = /id=([A-Za-z0-9]+)/i.exec(window.location.href); 
    if (!m) {
        console.error('missing id query argument');
    } else {
        var id = m[1];
        ksRunnerReady(function() {
            console.log('loading simulator for script ' + id)
            ks.runner.simulateAsync(id, document.getElementById('simulators')).done(function() {
                console.log('simulator started...')
                document.getElementById('loading').remove();
            })
        })
    }
    </script>
</body>

</html>